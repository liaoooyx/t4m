<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:fragment="head_and_imports">
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="description" content="Start your development with a Dashboard for Bootstrap 4.">
	<meta name="author" content="Creative Tim">
	<title>Argon Dashboard - Free Dashboard for Bootstrap 4</title>
	<!-- Favicon -->
	<link rel="icon" th:href="@{/assets/img/brand/favicon.png}" type="image/png">
	<!-- Fonts -->
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700">
	<!-- Icons -->
	<link rel="stylesheet" th:href="@{/assets/vendor/nucleo/css/nucleo.css}" type="text/css">
	<link rel="stylesheet" th:href="@{/assets/vendor/@fortawesome/fontawesome-free/css/all.min.css}" type="text/css">
	<!-- Page plugins -->
	<!-- Argon CSS -->
	<link rel="stylesheet" th:href="@{/assets/css/argon.css?v=1.2.0}" type="text/css">
	<link rel="stylesheet" th:href="@{/assets/vendor/bootstrap-table/bootstrap-table.min.css}">
	<link rel="stylesheet" th:href="@{/assets/vendor/bootstrap-table/bootstrap-table-fixed-columns.min.css}">
	
	<script th:src="@{/assets/vendor/echart/dist/echarts.js}"></script>
	<script th:src="@{/assets/js/vue.js}"></script>
	<style>
		/*.card-table {*/
		/*	max-height: 21rem;*/
		/*}*/
		/*.bootstrap-table .fixed-table-container .table{*/
		/*	border-left: 0!important;*/
		/*	border-right: 0!important;*/
		/*}*/
		/*.bootstrap-table .fixed-table-container.fixed-height .table thead th {*/
		/*	border-bottom: 0!important;*/
		/*}*/
		/*.bootstrap-table .fixed-table-container.fixed-height .fixed-table-border {*/
		/*	border-left: 0!important;*/
		/*	border-right: 0!important;*/
		/*}*/
		/*.bootstrap-table .fixed-table-container.fixed-height:not(.has-footer) {*/
		/*	border-bottom: 0!important;*/
		/*}*/
		/*.bootstrap-table .fixed-table-container .table thead th .th-inner {*/
		/*	padding: .75rem 1.5rem;*/
		/*}*/
		/*.bootstrap-table .fixed-table-container .fixed-table-header{*/
		/*	margin-right: 0 !important;*/
		/*}*/
		
		/*custom bootstrap .dropdown-menu for max height*/
		.dropdown-menu {
			max-height: 20rem;
			overflow: auto;
		}
		
		.sloc-table-chart-icon {
			font-size: 1rem;
			color: black;
		}
	
	</style>
</head>
<body>
<nav th:fragment="sidnav(selectedElementID)"
     class="sidenav navbar navbar-vertical  fixed-left  navbar-expand-xs navbar-light bg-white"
     id="sidenav-main">
	<div class="scrollbar-inner">
		<!-- Brand -->
		<div class="sidenav-header  align-items-center">
			<a class="navbar-brand" th:href="@{/dashboard/basic}">
				<h1>t4m</h1>
			</a>
		</div>
		<div class="navbar-inner">
			<!-- Collapse -->
			<div class="collapse navbar-collapse" id="sidenav-collapse-main">
				
				<!-- Heading -->
				<h6 class="navbar-heading p-0 text-muted">
					<span class="docs-normal">Operation</span>
				</h6>
				<!-- Nav items -->
				<ul class="navbar-nav px-2">
					<li class="nav-item">
						<button id="scan_current_project_btn" type="button"
						        class="col-auto btn btn-block btn-outline-primary text-uppercase"
						        onclick="scanCurrentProject(this)">
							<span class="btn-inner--icon"><i class="fas fa-search-plus"></i></span>
							<span class="btn-inner--text">Scan</span>
						</button>
						<div class="btn-group btn-block" role="group" aria-label="New project">
							<button id="new_project_btn" type="button" class="col-auto btn btn-outline-default text-uppercase"
							        data-toggle="modal"
							        data-target="#model_to_create_new_project">
								<span class="btn-inner--icon"><i class="fas fa-plus"></i></span>
								<span class="btn-inner--text">New</span>
							</button>
							<button id="switch_project_btn" type="button" class="col-auto btn btn-outline-default text-uppercase"
							        data-toggle="modal"
							        data-target="#model_to_switch_project">
								<span class="btn-inner--icon"><i class="fas fa-exchange-alt"></i></span>
								<span class="btn-inner--text">Switch</span>
							</button>
						</div>
					</li>
				</ul>
				
				<!-- Modal to create new project -->
				<div class="modal fade" id="model_to_create_new_project" tabindex="-1" role="dialog"
				     aria-labelledby="model_to_create_new_project_label" aria-hidden="true">
					<div class="modal-dialog modal-dialog-centered" role="document">
						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title" id="model_to_create_new_project_label">Scan New Project</h5>
								<button type="button" class="close" data-dismiss="modal" aria-label="Close">
									<span aria-hidden="true">&times;</span>
								</button>
							</div>
							<div class="modal-body">
								<input id="new_project_path" class="form-control" type="text"
								       placeholder="Please enter your project absolute root path">
							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
								<button type="button" class="btn btn-primary" onclick="scanNewProject()">Scan</button>
							</div>
						</div>
					</div>
				</div>
				
				<!-- Modal to switch and delete project -->
				<div class="modal fade" id="model_to_switch_project" tabindex="-1" role="dialog"
				     aria-labelledby="model_to_switch_project_label" aria-hidden="true">
					<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable" role="document">
						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title" id="model_to_switch_project_label">Switch Project</h5>
								<button type="button" class="close" data-dismiss="modal" aria-label="Close">
									<span aria-hidden="true">&times;</span>
								</button>
							</div>
							<div id="model_content_of_switching_project" class="modal-body">
								<div class="list-group list-group-flush">
									<a href="javascript:void(0);" class="list-group-item py-2 list-group-item-action"
									   v-for="projectName in projectList" v-bind:class="projectName === currentProject?'active':''"
									   v-on:click="switchProject(projectName)">
										{{projectName}}
									</a>
								</div>
							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
								<!--								<button type="button" class="btn btn-primary" >Choose</button>-->
							</div>
						</div>
					</div>
				</div>
				
				
				<!-- Divider -->
				<hr class="my-3">
				
				<!-- Heading -->
				<h6 class="navbar-heading p-0 text-muted">
					<span class="docs-normal">Dashboard</span>
				</h6>
				<!-- Nav items -->
				<ul class="navbar-nav">
					<li class="nav-item">
						<a class="nav-link" th:classappend="${selectedElementID==0}?'active':''" href="/dashboard/basic">
							<i class="ni ni-tv-2 text-primary"></i>
							<span class="nav-link-text">Basic</span>
						</a>
					</li>
				</ul>
				<ul class="navbar-nav">
					<li class="nav-item">
						<a class="nav-link" th:classappend="${selectedElementID==1}?'active':''" href="/dashboard/sloc">
							<i class="ni ni-tv-2 text-primary"></i>
							<span class="nav-link-text">SLOC</span>
						</a>
					</li>
				</ul>
				<ul class="navbar-nav">
					<li class="nav-item">
						<a class="nav-link" th:classappend="${selectedElementID==2}?'active':''" href="/dashboard/complexity">
							<i class="ni ni-tv-2 text-primary"></i>
							<span class="nav-link-text">Complexity</span>
						</a>
					</li>
				</ul>
				
				<!-- Divider -->
				<hr class="my-3">
				
				<!-- Heading -->
				<h6 class="navbar-heading p-0 text-muted">
					<span class="docs-normal">Documentation</span>
				</h6>
				<!-- Navigation -->
				<ul class="navbar-nav mb-md-3">
					<li class="nav-item">
						<a class="nav-link" href="https://demos.creative-tim.com/argon-dashboard/docs/getting-started/basic.html"
						   target="_blank">
							<i class="ni ni-spaceship"></i>
							<span class="nav-link-text">Getting started</span>
						</a>
					</li>
				</ul>
			
			</div>
		</div>
	</div>
</nav>

<footer th:fragment="footer" class="footer pt-0">
	<div class="row align-items-center justify-content-lg-between">
		<div class="col-lg-6">
			<div class="copyright text-center  text-lg-left  text-muted">
				&copy; 2020 <a href="https://www.creative-tim.com" class="font-weight-bold ml-1" target="_blank">Creative
				                                                                                                 Tim</a>
			</div>
		</div>
		<div class="col-lg-6">
			<ul class="nav nav-footer justify-content-center justify-content-lg-end">
				<li class="nav-item">
					<a href="https://www.creative-tim.com" class="nav-link" target="_blank">Creative Tim</a>
				</li>
				<li class="nav-item">
					<a href="https://www.creative-tim.com/presentation" class="nav-link" target="_blank">About Us</a>
				</li>
				<li class="nav-item">
					<a href="http://blog.creative-tim.com" class="nav-link" target="_blank">Blog</a>
				</li>
				<li class="nav-item">
					<a href="https://github.com/creativetimofficial/argon-dashboard/blob/master/LICENSE.md" class="nav-link"
					   target="_blank">MIT License</a>
				</li>
			</ul>
		</div>
	</div>
</footer>

<imports th:fragment="footer_imports">
	<!-- Argon Scripts -->
	<!-- Core -->
	<script th:src="@{/assets/vendor/jquery/dist/jquery.min.js}"></script>
	<script th:src="@{/assets/vendor/bootstrap/dist/js/bootstrap.bundle.min.js}"></script>
	<script th:src="@{/assets/vendor/js-cookie/js.cookie.js}"></script>
	<script th:src="@{/assets/vendor/jquery.scrollbar/jquery.scrollbar.min.js}"></script>
	<script th:src="@{/assets/vendor/jquery-scroll-lock/dist/jquery-scrollLock.min.js}"></script>
	<!-- Optional JS -->
	<script th:src="@{/assets/vendor/chart.js/dist/Chart.min.js}"></script>
	<script th:src="@{/assets/vendor/chart.js/dist/Chart.extension.js}"></script>
	<!-- Argon JS -->
	<script th:src="@{/assets/js/argon.js?v=1.2.0}"></script>
	<!--	<script th:src="@{/assets/js/fileinput.js}"></script>-->
	<!-- Bootstrap-table -->
	<script th:src="@{/assets/vendor/bootstrap-table/bootstrap-table.min.js}"></script>
	<script th:src="@{/assets/vendor/bootstrap-table/bootstrap-table-fixed-columns.min.js}"></script>
	
	<script th:inline="javascript">
      var blank_page_trigger = [[${isBlank}]];
      if (blank_page_trigger) {
          $("#new_project_btn").trigger("click");
      }

      function scanCurrentProject(obj) {
          $(obj).attr("disabled", "");
          $(obj).html("SCANNING...");
          let i = 0;
          let scanningCounter = setInterval(function () {
              $(obj).html("SCANNING..." + (++i));
          }, 1000);
          $.get("/operation/scan", function (data) {
              clearInterval(scanningCounter);
              if (data === "success") {
                  window.location.reload();
              }
          })
      }

      function scanNewProject() {
          let projectPath = $('#new_project_path').val()
          $.get("/operation/new?path=" + projectPath, function (data) {
              if (data === "success") {
                  window.location.reload();
              }
          })
      }

      $('#model_to_switch_project').on('show.bs.modal', function (e) {
          $.get("/operation/search", function (data) {
              console.log(data['currentProject']);
              vm_for_switch_project_model.projectList = data['projectList'];
              vm_for_switch_project_model.currentProject = data['currentProject'];
          })
      })

      var vm_for_switch_project_model = new Vue({
          el: '#model_content_of_switching_project',
          data: {
              projectList: [],
              currentProject: '',
          },
          methods: {
              switchProject: function (targetProjectName) {
                  console.log(targetProjectName)
                  $.get("/operation/switch/" + targetProjectName, function (data) {
                      if (data === "success") {
                          window.location.href = "/dashboard/basic";
                      }
                  })
              },
          }
      })
	
	</script>
</imports>

</body>
</html>
